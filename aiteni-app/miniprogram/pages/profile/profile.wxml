<!--pages/profile/profile.wxml-->
<view class="page-container" style="padding-top: {{safeTopPadding}}rpx;">
  <!-- 头部区域 -->
  <view class="profile-header">
    <view class="h1">个人中心</view>
  </view>

  <!-- 用户信息卡片 -->
  <view class="card card-soft user-card">
    <block wx:if="{{isLoggedIn}}">
      <!-- 已登录 -->
      <view class="user-info">
        <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
        <view class="user-details">
          <text class="nickname">{{userInfo.nickName}}</text>
          <view class="user-badge">
            <text class="badge-text">网球爱好者</text>
          </view>
        </view>
      </view>
    </block>
    <block wx:else>
      <!-- 未登录 -->
      <view class="user-info" bindtap="goToLogin">
        <view class="avatar-placeholder">
          <text class="avatar-icon">👤</text>
        </view>
        <view class="user-details">
          <text class="nickname">点击登录</text>
          <text class="sub-text">登录后查看更多功能</text>
        </view>
        <view class="arrow-icon">›</view>
      </view>
    </block>
  </view>

  <!-- 功能列表 -->
  <view class="menu-list">
    <view class="card card-soft menu-card">
      <view class="menu-item" bindtap="goToHistory">
        <view class="menu-left">
          <view class="icon-box icon-box-blue">
            <text class="menu-icon">📊</text>
          </view>
          <text class="menu-title">我的评估记录</text>
        </view>
        <text class="arrow-icon">›</text>
      </view>

      <view class="menu-divider"></view>

      <view class="menu-item" bindtap="goToHistory">
        <view class="menu-left">
          <view class="icon-box icon-box-green">
            <text class="menu-icon">📈</text>
          </view>
          <text class="menu-title">水平历程</text>
        </view>
        <text class="arrow-icon">›</text>
      </view>
    </view>

    <!-- 设置选项 -->
    <view class="card card-soft menu-card">
      <view class="menu-item" bindtap="goToAbout">
        <view class="menu-left">
          <view class="icon-box icon-box-gray">
            <text class="menu-icon">ℹ️</text>
          </view>
          <text class="menu-title">关于我们</text>
        </view>
        <text class="arrow-icon">›</text>
      </view>
    </view>
  </view>

  <!-- 退出登录按钮 -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="btn-logout" bindtap="handleLogout">退出登录</button>
  </view>
</view>
