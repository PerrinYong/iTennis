<!--pages/profile/profile.wxml-->
<view class="container" style="padding-top: {{safeTopPadding}}rpx;">
  <!-- 自定义导航栏 -->
  <view class="custom-navbar">
    <view class="navbar-title">个人中心</view>
  </view>

  <!-- 用户信息区域 -->
  <view class="user-section">
    <block wx:if="{{isLoggedIn}}">
      <!-- 已登录 -->
      <view class="user-info">
        <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
        <view class="user-details">
          <text class="nickname">{{userInfo.nickName}}</text>
          <text class="level">网球爱好者</text>
        </view>
      </view>
    </block>
    <block wx:else>
      <!-- 未登录 -->
      <view class="user-info" bindtap="goToLogin">
        <image class="avatar" src="/images/default-avatar.png" mode="aspectFill"></image>
        <view class="user-details">
          <text class="nickname">点击登录</text>
          <text class="level">登录后查看更多功能</text>
        </view>
        <view class="arrow">›</view>
      </view>
    </block>
  </view>

  <!-- 功能列表 -->
  <view class="menu-section">
    <view class="menu-item" bindtap="goToHistory">
      <view class="menu-left">
        <text class="menu-icon">📊</text>
        <text class="menu-title">我的评估记录</text>
      </view>
      <view class="menu-right">
        <text class="arrow">›</text>
      </view>
    </view>

    <view class="menu-item" bindtap="goToHistory">
      <view class="menu-left">
        <text class="menu-icon">📈</text>
        <text class="menu-title">水平历程</text>
      </view>
      <view class="menu-right">
        <text class="arrow">›</text>
      </view>
    </view>
  </view>

  <!-- 设置选项 -->
  <view class="menu-section">
    <navigator class="menu-item" url="/pages/about/about">
      <view class="menu-left">
        <text class="menu-icon">ℹ️</text>
        <text class="menu-title">关于我们</text>
      </view>
      <view class="menu-right">
        <text class="arrow">›</text>
      </view>
    </navigator>
  </view>

  <!-- 退出登录按钮 -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="handleLogout">退出登录</button>
  </view>
</view>
