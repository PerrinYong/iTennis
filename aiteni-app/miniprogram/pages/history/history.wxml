<!--pages/history/history.wxml-->
<!-- æ ¹å®¹å™¨ä½¿ç”¨.page-container + åŠ¨æ€ç»‘å®šå®‰å…¨ç•™ç™½ -->
<view class="page-container" style="padding-top: {{safeTopPadding}}rpx;">
  <!-- å†…å®¹åŒº -->
  <view class="page-content">
    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{history.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">è¿˜æ²¡æœ‰è¯„æµ‹è®°å½•</text>
      <button class="btn-primary empty-btn" bindtap="startTest">
        å¼€å§‹è¯„æµ‹
      </button>
    </view>

    <!-- å†å²è®°å½•åˆ—è¡¨ -->
    <view wx:else class="history-list">
      <view
        wx:for="{{history}}"
        wx:key="id"
        class="history-card card card-soft"
        bindtap="viewResult"
        data-result-id="{{item.id}}"
      >
        <view class="history-header">
          <view class="history-level">
            <text class="level-badge">{{item.rounded_level}}</text>
            <text class="level-label">{{item.level_label}}</text>
          </view>
          <text class="history-date">{{item.dateText}}</text>
        </view>

        <view class="history-tags">
          <text
            wx:for="{{item.topDimensions}}"
            wx:key="*this"
            wx:for-item="tag"
            class="chip chip-blue"
          >{{tag}}</text>
        </view>

        <view class="history-footer">
          <text class="view-detail">æŸ¥çœ‹è¯¦æƒ… â†’</text>
        </view>
      </view>
    </view>
  </view>
</view>
